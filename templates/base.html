<!DOCTYPE html>
<html>
<head>
    <title>Samaya Spaces - Find Your Place and People</title>
    
    <!-- A little bit of simple styling to make the navigation bar look clean -->
    <style>
        body { font-family: sans-serif; }
        nav { 
            background-color: #f8f8f8; 
            padding: 10px; 
            border-bottom: 1px solid #ddd;
            overflow: hidden; /* This helps contain the floated elements */
        }
        nav a, nav form button { 
            margin: 0 10px;
            color: #337ab7;
            text-decoration: none;
            font-size: 1em;
        }
        nav a:hover {
            text-decoration: underline;
        }
        .nav-right { 
            float: right; 
        }
        .messages {
            list-style: none;
            padding: 10px;
            margin: 10px 0;
            background-color: #e7f3fe;
            border-left: 6px solid #2196F3;
        }
    </style>
</head>
<body>

    <!-- ======================= NAVIGATION BAR ======================= -->
    <nav>
        
        <!-- Main Site Navigation (Visible to Everyone) -->
        <a href="{% url 'listings:list' %}">Find a Room</a>
        <a href="{% url 'roommates:list' %}">Find a Roommate</a>

        <!-- User-specific links, floated to the right -->
        <div class="nav-right">
            {% if user.is_authenticated %}
                <!-- This section is for LOGGED-IN users -->
                <a href="{% url 'listings:owner_dashboard' %}">My Listings & Bookings</a>
                <a href="{% url 'roommates:my_profile' %}">My Roommate Profile</a>
                
                <span style="margin: 0 10px;">|</span>
                
                <span>Hi, {{ user.username }}!</span>

                <!-- The Logout link MUST be a form that sends a POST request -->
                <form action="{% url 'logout' %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" style="background:none; border:none; padding:0; color:blue; text-decoration:underline; cursor:pointer;">Logout</button>
                </form>

            {% else %}
                <!-- This section is for GUESTS (not logged in) -->
                <a href="{% url 'login' %}">Login</a>
                <a href="{% url 'signup' %}">Sign Up</a>
            {% endif %}
        </div>

    </nav>
    <!-- ===================== END NAVIGATION BAR ===================== -->
    
    <hr style="clear: both; visibility: hidden;">


    <!-- ===================== MESSAGES FRAMEWORK ===================== -->
    <!-- This block will display success or error messages from our views -->
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
        <hr>
    {% endif %}
    <!-- =================== END MESSAGES FRAMEWORK =================== -->


    <!-- ===================== MAIN PAGE CONTENT ====================== -->
    <main>
        {% block content %}
        <!-- The content from other templates (like listing_list.html) will be inserted here -->
        {% endblock content %}
    </main>
    <!-- =================== END MAIN PAGE CONTENT ==================== -->

</body>
</html>