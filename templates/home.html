{% extends 'base.html' %}

{% block content %}
  <h1>All Listings</h1>

  {% for listing in listings %}
    <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 15px;">
      
      {% if listing.main_photo %}
        <a href="{{ listing.get_absolute_url }}">
          <img src="{{ listing.main_photo.url }}" alt="{{ listing.title }}" width="300">
        </a>
      {% endif %}

      <h2><a href="{{ listing.get_absolute_url }}">{{ listing.title }}</a></h2>
      <p>By: {{ listing.owner.username }}</p>

      {% if listing.price_per_month %}
        <p><b>${{ listing.price_per_month }} per month</b></p>
      {% endif %}
      
    </div>
    <hr>
  {% empty %}
    <p>No listings have been posted yet. Be the first!</p>
  {% endfor %}

{% endblock content %}